<style>
#eventLog
{
    /* We are using mobile device! Scrollbars are a bit annoying on mobiles, and
    so are disabled by default and must be enabled by force. */
    width: 100%;
    resize: none;
    height: 100px;
    font-size: 8pt;
    max-height: 100px;
    overflow-y: scroll;
    box-sizing: border-box;
    font-family: monospace;
}    
</style>

<!-- Connection -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_connection_connection.md.html#Connection -->
<!-- Needs: <feature name="http://api.phonegap.com/1.0/network"/> in config.xml! -->

<h1 data-i18n="phonegap.connection.title">phonegap.connection.title</h1>

<p><span data-i18n="phonegap.connection.label">phonegap.connection.label</span>: <span id="connectionType" style="font-weight: bold" data-i18n="phonegap.loader">Please, wait...</span></p>

<div class="page-header"></div>


<!-- Geolocation -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_geolocation_geolocation.md.html#Geolocation -->
<!-- Needs: <feature name="http://api.phonegap.com/1.0/geolocation"/> in config.xml! -->

<p></p>
<p>To be continued...</p>

<div class="page-header"></div>


<!-- Accelerometer -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_accelerometer_accelerometer.md.html#Accelerometer -->

<a id="btnAccelerationStart" class="btn btn-primary btn-large" href="#" data-i18n="phonegap.acceleration.title">phonegap.acceleration.title</a>
<a id="btnAccelerationStop" class="btn btn-info btn-large" href="#" data-i18n="phonegap.acceleration.title" style="display: none">phonegap.acceleration.title</a>

<p></p>
<p><span id="accelerationText"></span></p>

<div class="page-header"></div>


<!-- Compass -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_compass_compass.md.html#Compass -->

<a id="btnCompassStart" class="btn btn-primary btn-large" href="#">Compass</a>
<a id="btnCompassStop" class="btn btn-info btn-large" href="#" style="display: none">Compass</a>

<p></p>
<p><span id="compassText"></span></p>

<div class="page-header"></div>


<!-- Media -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_media_media.md.html#Media -->
<!-- Needs: <feature name="http://api.phonegap.com/1.0/media"/> in config.xml! -->

<h3>Media</h3>

<p>To be continued...</p>

<div class="page-header"></div>


<!-- Battery -- only available through events -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_events_events.md.html#Events -->
<!-- Needs: <feature name="http://api.phonegap.com/1.0/battery"/> in config.xml! -->

<h3>Battery</h3>

<p>Level: <strong><span id="lblBatteryLevel"></span></strong></p>
<p>Status: <strong><span id="lblBatteryStatus"></span></strong></p>
<p>Charging: <strong><span id="lblBatteryPlugged"></span></strong></p>

<div class="page-header"></div>


<!-- Events -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_events_events.md.html#Events -->

<h3>Event log</h3>

<p><textarea id="eventLog"></textarea></p>

<div class="page-header"></div>


<!-- Storage -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_storage_storage.md.html#Storage -->

<h3>Storage</h3>

<p></p>
<p>To be continued...</p>

<div class="page-header"></div>

<!-- Notification -->
<!-- http://docs.phonegap.com/en/2.9.0/cordova_notification_notification.md.html#Notification -->
<!-- Needs: <feature name="http://api.phonegap.com/1.0/notification"/> in config.xml! -->

<a id="btnNotificationBeep" class="btn btn-success btn-large" href="#">Beep!</a>
<a id="btnNotificationVibrate" class="btn btn-error btn-large" href="#">Vibrate!</a>

<div class="page-header"></div>

<!-- Bottom description and code -->

<div style="border-top: 1px solid #eee"></div>

<p></p>

<p data-i18n="phonegap.description">phonegap.description</p>

<script type="text/javascript">
/*<![CDATA[*/
    function onAccelerationSuccess(acceleration)
    {
        //Acceleration is already recalculated in PhoneGap!
        //var g = 9.80665;

        //Fix for stupid PhoneGap sometimes returning NaN...
        acceleration.x = (parseFloat(acceleration.x) || 0);
        acceleration.y = (parseFloat(acceleration.y) || 0);
        acceleration.z = (parseFloat(acceleration.z) || 0);
        
        acceleration.x = (acceleration.x).toFixed(2) + ' m/s\u00b2';
        acceleration.y = (acceleration.y).toFixed(2) + ' m/s\u00b2';
        acceleration.z = ((acceleration.z + 1)).toFixed(2) + ' m/s\u00b2';
        
        var timestampText = i18n.t('phonegap.acceleration.line2', {timestamp: acceleration.timestamp});

        var accelerationText = i18n.t('phonegap.acceleration.line1',
        {
            axis: 'X',
            acceleration: acceleration.x
        });

        accelerationText = accelerationText + '<br />' + i18n.t('phonegap.acceleration.line1',
        {
            axis: 'Y',
            acceleration: acceleration.y
        });

        accelerationText = accelerationText + '<br />' + i18n.t('phonegap.acceleration.line1',
        {
            axis: 'Z',
            acceleration: acceleration.z
        });

        $('#accelerationText').html(accelerationText + '<br />' + timestampText);
    }
    
    function onAccelerationError()
    {
        $('#accelerationText').html(i18n.t('phonegap.acceleration.error'));
    };
    
    function onCompassSuccess(compass)
    {
        //Fix for stupid PhoneGap sometimes returning NaN...
        compass.trueHeading = (parseFloat(compass.trueHeading) || 0);
        compass.magneticHeading = (parseFloat(compass.magneticHeading) || 0);
        compass.headingAccuracy = (parseFloat(compass.headingAccuracy) || 0);
        
        compass.trueHeading = compass.trueHeading.toFixed(2) + '\u00b0';
        compass.magneticHeading = compass.magneticHeading.toFixed(2) + '\u00b0';
        compass.headingAccuracy = compass.headingAccuracy.toFixed(2) + '\u00b0';
        
        var
            timestampText = 'Current timestamp is <strong>' + compass.timestamp + '</strong>.',
            headingText = '<strong>Magnetic heading</strong> is <strong>' + compass.magneticHeading + '</strong>.<br />';
    
        headingText = headingText + '<strong>True heading</strong> is <strong>' + compass.trueHeading + '</strong>.<br />';
        headingText = headingText + '<strong>Heading accuracy</strong> is <strong>' + compass.headingAccuracy + '</strong>.';

        $('#compassText').html(headingText + '<br />' + timestampText);
    }
    
    function onCompassError(CompassError)
    {
        if(CompassError.COMPASS_INTERNAL_ERR) $('#compassText').html('Internal compass error has occured!');
        
        if(CompassError.COMPASS_NOT_SUPPORTED) $('#compassText').html('Compass is not supported on this device!');
    };
    
	$(function($)
    {
        var
            compassID = 0,
            accelerationID = 0;
            
        /**
         * Acceleration
         */
        $('body').on('click', '#btnAccelerationStart').click(function()
		{
            //Fake initial values
            var
                acceleration = new Object(),
                now = new Date();
            
            acceleration.x = 0;
            acceleration.y = 0;
            acceleration.z = -1;
            acceleration.timestamp = now.getTime();
            
            onAccelerationSuccess(acceleration);
            
            //Start watching...
			accelerationID = navigator.accelerometer.watchAcceleration(onAccelerationSuccess, onAccelerationError, {frequency: 100});
			
			$('#btnAccelerationStop').show();
			$('#btnAccelerationStart').hide();
            
            app.writeEventLog('btnAccelerationStart.click();');
		});

		$('body').on('click', '#btnAccelerationStop').click(function()
		{
			navigator.accelerometer.clearWatch(accelerationID);
            
            $('#accelerationText').html('');
			
			$('#btnAccelerationStart').show();
			$('#btnAccelerationStop').hide();
            
            app.writeEventLog('btnAccelerationStop.click();');
		});
        
        /**
         * Compass
         */
		$('body').on('click', '#btnCompassStart').click(function()
		{
            //Fake initial values
            var
                compass = new Object(),
                now = new Date();
            
            compass.magneticHeading = 0;
            compass.trueHeading = 0;
            compass.headingAccuracy = 0;
            compass.timestamp = now.getTime();
            
            onCompassSuccess(compass);
            
            //Start watching...
			compassID = navigator.compass.watchHeading(onCompassSuccess, onCompassError);
			
			$('#btnCompassStop').show();
			$('#btnCompassStart').hide();
            
            app.writeEventLog('btnCompassStart.click();');
		});

		$('body').on('click', '#btnCompassStop').click(function()
		{
			navigator.compass.clearWatch(compassID);
            
            $('#compassText').html('');
			
			$('#btnCompassStart').show();
			$('#btnCompassStop').hide();
            
            app.writeEventLog('btnCompassStop.click();');
		});
        
		$('body').on('click', '#btnNotificationVibrate').click(function()
		{
			navigator.notification.vibrate(2500);
            
            app.writeEventLog('btnNotificationVibrate.click();');
		});
        
		$('body').on('click', '#btnNotificationBeep').click(function()
		{
            /**
             * The iPhone does not feature a native beep API. Cordova implements
             * beeps by playing an audio file via the media API. The app must provide
             * a file with the desired beep tone. This file must be less than
             * 30 seconds long, located in the www root directory, and must be named
             * `beep.wav`.
             * 
             * Good beep-click sounds library: http://www.soundjay.com/button-sounds-1.html
             * .wav File Signal Generator: http://www.audiocheck.net/audiofrequencysignalgenerator_sinetone.php
             */
			navigator.notification.beep(3);
            
            app.writeEventLog('btnNotificationVibrate.click();');
		});
    });
/*]]>*/
</script>